<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Coger Agri Admin Dashboard</title>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}
:root {
  --green: #2d5016;
  --light-green: #4a7c2c;
  --sage: #7fb069;
  --brown: #8b7355;
  --yellow: #f4a259;
  --bg: #f8f9f0;
  --white: #fff;
  --dark: #2c3e1f;
  --red: #d9534f;
  --orange: #f0ad4e;
  --success: #5cb85c;
}
body {
  font-family: Arial, sans-serif;
  background: var(--bg);
  color: var(--dark);
}
.notify-bar {
  background: linear-gradient(135deg, var(--orange), var(--yellow));
  color: white;
  padding: 12px 20px;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 1000;
  display: none;
  align-items: center;
  justify-content: space-between;
}
.notify-bar.show {
  display: flex;
}
.sidebar {
  width: 260px;
  height: 100vh;
  background: linear-gradient(180deg, var(--green), var(--light-green));
  color: white;
  position: fixed;
  left: 0;
  top: 0;
  padding-top: 20px;
  overflow-y: auto;
}
.logo {
  padding: 20px;
  font-size: 24px;
  font-weight: bold;
  text-align: center;
  border-bottom: 1px solid rgba(255, 255, 255, 0.2);
}
.menu-item {
  padding: 15px 25px;
  cursor: pointer;
  transition: 0.3s;
  border-left: 4px solid transparent;
  display: flex;
  align-items: center;
  gap: 12px;
}
.menu-item:hover,
.menu-item.active {
  background: rgba(255, 255, 255, 0.1);
  border-left-color: var(--yellow);
}
.main {
  margin-left: 260px;
  padding: 20px;
}
.top-bar {
  background: white;
  padding: 15px 25px;
  border-radius: 10px;
  margin-bottom: 25px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
}
.title {
  font-size: 28px;
  color: var(--green);
  font-weight: 600;
}
.stats {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  gap: 20px;
  margin-bottom: 30px;
}
.stat-card {
  background: white;
  padding: 25px;
  border-radius: 12px;
  box-shadow: 0 2px 15px rgba(0, 0, 0, 0.08);
  border-left: 4px solid var(--sage);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
}
.stat-card.warn {
  border-left-color: var(--orange);
}
.stat-icon {
  font-size: 36px;
  margin-bottom: 10px;
}
.stat-value {
  font-size: 32px;
  font-weight: bold;
  color: var(--green);
  margin: 10px 0;
}
.section {
  background: white;
  padding: 25px;
  border-radius: 12px;
  box-shadow: 0 2px 15px rgba(0, 0, 0, 0.08);
  margin-bottom: 25px;
  display: none;
}
.section.active {
  display: block;
}
.sec-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 25px;
  padding-bottom: 15px;
  border-bottom: 2px solid var(--bg);
}
.sec-title {
  font-size: 22px;
  color: var(--green);
  font-weight: 600;
}
.filters {
  display: flex;
  gap: 10px;
  margin-bottom: 15px;
}
.filters select.search, .filters input.search {
  padding: 10px 15px;
  border: 2px solid #e0e0e0;
  border-radius: 25px;
  font-size: 14px;
  width: 200px;
}
.filters input.search {
  flex: 1;
  max-width: 320px;
}
.btn {
  padding: 10px 20px;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  font-size: 14px;
  font-weight: 500;
  transition: 0.3s;
}
.btn-primary {
  background: var(--light-green);
  color: white;
}
.btn-primary:hover {
  background: var(--green);
  transform: translateY(-2px);
}
.btn-success {
  background: var(--success);
  color: white;
}
.btn-warn {
  background: var(--orange);
  color: white;
}
.btn-danger {
  background: var(--red);
  color: white;
}
.btn-sm {
  padding: 6px 12px;
  font-size: 12px;
}
.table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 20px;
}
.table th {
  background: var(--sage);
  color: white;
  padding: 12px;
  text-align: left;
  font-weight: 600;
}
.table td {
  padding: 12px;
  border-bottom: 1px solid #e0e0e0;
  vertical-align: middle;
}
.table tr:hover {
  background: var(--bg);
}
.badge {
  padding: 4px 12px;
  border-radius: 20px;
  font-size: 12px;
  font-weight: 500;
  display: inline-block;
}
.badge-pending {
  background: #fff3cd;
  color: #856404;
}
.badge-shipped {
  background: #d1ecf1;
  color: #0c5460;
}
.badge-delivered {
  background: #d4edda;
  color: #155724;
}
.badge-delayed {
  background: #f8d7da;
  color: #721c24;
}
.low-stock {
  color: var(--red);
  font-weight: bold;
}
.product-img {
  width: 50px;
  height: 50px;
  object-fit: cover;
  border-radius: 6px;
}
.pagination {
  margin-top: 15px;
  display: flex;
  justify-content: center;
  gap: 8px;
}
.pagination button {
  padding: 6px 12px;
  border: 2px solid var(--light-green);
  background: white;
  color: var(--green);
  cursor: pointer;
  border-radius: 6px;
  font-weight: 600;
  transition: background 0.3s;
}
.pagination button:hover:not(.active) {
  background: var(--light-green);
  color: white;
}
.pagination button.active {
  background: var(--green);
  color: white;
  cursor: default;
}
.modal {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  z-index: 2000;
  align-items: center;
  justify-content: center;
}
.modal.show {
  display: flex;
}
.modal-content {
  background: white;
  padding: 30px;
  border-radius: 12px;
  max-width: 600px;
  width: 90%;
  max-height: 90vh;
  overflow-y: auto;
}
.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
  padding-bottom: 15px;
  border-bottom: 2px solid var(--bg);
}
.close {
  cursor: pointer;
  font-size: 28px;
  color: #999;
  background: none;
  border: none;
}
.close:hover {
  color: var(--red);
}
.search {
  padding: 10px 15px;
  border: 2px solid #e0e0e0;
  border-radius: 25px;
  width: 300px;
  font-size: 14px;
}
.search:focus {
  outline: none;
  border-color: var(--sage);
}
.actions {
  display: flex;
  gap: 8px;
}

@media (max-width: 768px) {
  .sidebar {
    width: 100%;
    height: auto;
    position: relative;
  }
  .main {
    margin-left: 0;
  }
  .stats {
    grid-template-columns: 1fr;
  }
}

/* Toast styles */
.toast {
  position: fixed;
  bottom: 20px;
  right: 20px;
  background: var(--green);
  color: white;
  padding: 15px 25px;
  border-radius: 8px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.2);
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s ease-in-out;
  z-index: 4000;
}
.toast.show {
  opacity: 1;
  pointer-events: auto;
}
</style>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

</head>
<body>
<div class="notify-bar" id="notifyBar">
  <div><span id="notifyText"></span></div>
  <button id="notifyCloseBtn" aria-label="Close notifications">&times;</button>
</div>

<div class="sidebar">
  <div class="logo">ðŸŒ¾ Coger Agri</div>
  <div class="menu-item active" data-section="dashboard">ðŸ“Š Dashboard</div>
  <div class="menu-item" data-section="products">ðŸ“¦ Products</div>
  <div class="menu-item" data-section="orders">ðŸ›’ Orders</div>
  <div class="menu-item" data-section="customers">ðŸ‘¥ Customers</div>
  <div class="menu-item" data-section="analytics">ðŸ“ˆ Analytics</div>
  <div class="menu-item" data-section="finances">ðŸ’° Finances</div>
</div>

<div class="main">

  <!-- Dashboard, Products, Orders, Customers, Analytics sections code as previously built -->

  <!-- Dashboard Overview Section -->
  <div class="section active" id="dashboard">
    <div class="sec-header">
      <div class="sec-title">Dashboard Overview</div>
    </div>
    <div class="stats">
      <!-- The dashboard cards as before -->
    </div>
    <h3>Sales Trend</h3>
    <canvas id="salesChart" height="150" aria-label="Sales trend chart" role="img"></canvas>
    <h3>Recent Activity</h3>
    <ul id="recentActivity" style="list-style: none; padding-left: 0;"></ul>
  </div>

  <!-- Products, Orders, Customers, Analytics sections here (reuse previous full code versions) -->

  <!-- Finances Section -->
  <div class="section" id="finances">
    <div class="sec-header">
      <div class="sec-title">Financial Overview</div>
    </div>

    <div class="stats" style="grid-template-columns: repeat(auto-fit,minmax(220px,1fr));">
      <div class="stat-card">
        <div class="stat-icon">ðŸ’°</div>
        <div class="stat-value" id="financesTotalRevenue">â‚¹0</div>
        <div>Total Revenue</div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">ðŸ“‰</div>
        <div class="stat-value" id="financesTotalExpenses">â‚¹0</div>
        <div>Total Expenses</div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">ðŸ“ˆ</div>
        <div class="stat-value" id="financesNetProfit">â‚¹0</div>
        <div>Net Profit</div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">ðŸ“Š</div>
        <div class="stat-value" id="financesProfitMargin">0%</div>
        <div>Profit Margin</div>
      </div>
    </div>

    <h3>Income vs Expenses Over Time</h3>
    <canvas id="incomeExpensesChart" height="150"></canvas>

    <h3>Expense Breakdown</h3>
    <canvas id="expenseBreakdownChart" height="150"></canvas>
  </div>

</div>

<!-- Modals for product, order edits (unchanged) -->

<div id="toast" class="toast" role="alert" aria-live="assertive" aria-atomic="true"></div>

<script>
(function () {
  // SAMPLE DATA
  let products = JSON.parse(localStorage.getItem("products")) || [
    // Your product objects with imageUrl fields
  ];
  let orders = JSON.parse(localStorage.getItem("orders")) || [
    { id: 101, customer: "John Doe", total: 125.5, status: "pending", courier: "", tracking: "" },
    { id: 102, customer: "Jane Smith", total: 299.99, status: "shipped", courier: "FedEx", tracking: "FDX123456" },
    { id: 103, customer: "Bob Johnson", total: 75.0, status: "delivered", courier: "DHL", tracking: "DHL789012" },
    { id: 104, customer: "Alice Brown", total: 450.0, status: "pending", courier: "", tracking: "" },
  ];
  let customers = JSON.parse(localStorage.getItem("customers")) || [
    { name: "John Doe", email: "john@example.com", orders: 3, spent: 450 },
    { name: "Jane Smith", email: "jane@example.com", orders: 5, spent: 890 },
  ];

  // Dummy finance data -- replace with real data source integration
  const financeData = {
    totalRevenue: orders.reduce((sum, o) => sum + o.total, 0),
    totalExpenses: 1250.75,
    monthlyIncome: [10000, 12000, 14000, 13000, 15000, 16000, 17000],
    monthlyExpenses: [8000, 9000, 8500, 11000, 9800, 10000, 12000],
    expenseCategories: {
      "Raw Materials": 4000,
      "Labor": 3000,
      "Marketing": 1500,
      "Logistics": 1000,
      "Miscellaneous": 750,
    }
  };

  // Initialization for all dashboards and charts
  function init() {
    // Load your products, orders, customers, stats, pagination here (reuse from previous code)

    initAnalyticsCharts();
    initFinancesDashboard(financeData);

    // Other initializations...
  }

  // Analytics charts from previous code snippet
  function initAnalyticsCharts() {
    // ... Your analytics chart initialization code from earlier ...
  }

  // Finances dashboard initialization as provided earlier
  function initFinancesDashboard(financeData) {
    const netProfit = financeData.totalRevenue - financeData.totalExpenses;
    const profitMargin = financeData.totalRevenue
      ? ((netProfit / financeData.totalRevenue) * 100).toFixed(1)
      : 0;

    document.getElementById("financesTotalRevenue").textContent = "â‚¹" + financeData.totalRevenue.toFixed(2);
    document.getElementById("financesTotalExpenses").textContent = "â‚¹" + financeData.totalExpenses.toFixed(2);
    document.getElementById("financesNetProfit").textContent = "â‚¹" + netProfit.toFixed(2);
    document.getElementById("financesProfitMargin").textContent = profitMargin + "%";

    const ctx1 = document.getElementById("incomeExpensesChart").getContext("2d");
    new Chart(ctx1, {
      type: "line",
      data: {
        labels: financeData.monthlyIncome.map((_, i) => `Month ${i + 1}`),
        datasets: [
          {
            label: "Income",
            data: financeData.monthlyIncome,
            borderColor: "#4a7c2c",
            backgroundColor: "rgba(74,124,44,0.3)",
            fill: true,
            tension: 0.3,
          },
          {
            label: "Expenses",
            data: financeData.monthlyExpenses,
            borderColor: "#d9534f",
            backgroundColor: "rgba(217,83,79,0.3)",
            fill: true,
            tension: 0.3,
          },
        ],
      },
      options: {
        responsive: true,
        scales: { y: { beginAtZero: true } },
      },
    });

    const ctx2 = document.getElementById("expenseBreakdownChart").getContext("2d");
    new Chart(ctx2, {
      type: "doughnut",
      data: {
        labels: Object.keys(financeData.expenseCategories),
        datasets: [
          {
            data: Object.values(financeData.expenseCategories),
            backgroundColor: [
              "#f4a259",
              "#7fb069",
              "#8b7355",
              "#d9534f",
              "#4a7c2c",
              "#f0ad4e",
            ],
          },
        ],
      },
      options: { responsive: true },
    });
  }

  // Other dashboard functions (product, orders, customers, analytics, modals, pagination, toast etc.) go here â€“ reuse your previous full implementations.

  window.onload = init;
})();
</script>
</body>
</html>

